--[[    create by baihan 2020.02.25 
    宝石的基本类型
--]]
local Gem = Class("Gem", UnityObjectClass)

-- 主要图片
Gem.m_mainImage = nil

-- id
Gem.m_iId = nil

-- 类型
Gem.m_strType = nil

-- 相邻的id
Gem.m_lsNearIds = {
    ["left"] = nil,
    ["right"] = nil,
    ["top"] = nil,
    ["down"] = nil,
}

function Gem:Init(texNewImage, iId, strType, lsNearId)
    self.m_mainImage = self.m_transform.gameObject:GetComponent("RawImage")
    self.m_iId = iId
    self.m_strType = strType
    if lsNearId ~= nil then
        self.m_lsNearIds = lsNearId
    end

    -- print("Gem id is: " .. iId .. " and type is: " .. strType)
    if texNewImage ~= nil then
        self:ChangeImage(texNewImage)
    end
end

-- 改变图片
function Gem:ChangeImage(texNewImage)
    self.m_mainImage.texture = texNewImage
end

-- 播放动画并删除
function Gem:DestoryWithAnimation(fDestoryTime)
    local deadTween = self.m_transform:DOScale(Uvec3(0, 0, 0), fDestoryTime)
    deadTween:OnComplete(function()
        Udestroy(self.m_transform.gameObject)
    end)
end

-- 移动到指定位置
function Gem:MoveToTargetPosition(v3TargetPositon)
    self.m_transform:DOMove(v3TargetPositon, 1):SetEase(DOEase.InOutSine)
end

return Gem;